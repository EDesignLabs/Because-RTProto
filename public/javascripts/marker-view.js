// Generated by CoffeeScript 1.6.1

define(["d3view"], function(D3View) {
  var MarkerView;
  return MarkerView = D3View.extend({
    tagName: 'g',
    initialize: function(options) {
      this.constructor.__super__.initialize.call(this, options);
      return this.model.addEventListener(gapi.drive.realtime.EventType.OBJECT_CHANGED, _.bind(this.onObjectChanged, this));
    },
    onObjectChanged: function() {
      return this.render();
    },
    render: function() {
      var _ref;
      this.d3el.attr({
        'id': this.model.id,
        'x': 0,
        'y': 0,
        'data-type': 'marker',
        'transform': "matrix(1 0 0 1 " + (this.model.get('x').getText()) + " " + (this.model.get('y').getText()) + ")"
      });
      if (!this.markerCircleElement) {
        this.markerCircleElement = this.d3el.append('circle');
      }
      return this.markerCircleElement.attr({
        'r': 5,
        'cx': 5,
        'cy': 5,
        'data-type': 'marker-circle',
        'fill': ((_ref = this.model.get('color')) != null ? _ref.getText() : void 0) || 'gray',
        'stroke': 'none'
      });
    }
  });
});
