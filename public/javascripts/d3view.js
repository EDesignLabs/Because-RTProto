// Generated by CoffeeScript 1.4.0

define(function() {
  var D3View;
  return D3View = Backbone.View.extend({
    initialize: function(options) {
      var _this = this;
      Backbone.View.prototype.initialize.call(this, options);
      this.dispatcher = options.dispatcher;
      return this.dispatcher.on('workspace:remove-object', function(model) {
        var _ref;
        if (model.id === ((_ref = _this.model) != null ? _ref.id : void 0)) {
          return _this.remove();
        }
      });
    },
    _ensureElement: function() {
      var $el, attrs, _ref;
      attrs = _.extend({}, _.result(this, 'attributes'));
      if (this.id) {
        attrs.id = _.result(this, 'id');
      }
      if (this.className) {
        attrs["class"] = _.result(this, 'className');
      }
      if (!this.el) {
        this.d3el = (_ref = this.options.parent) != null ? _ref.append(_.result(this, 'tagName')) : void 0;
        this.d3el.attr(attrs);
        $el = $(this.d3el.node());
        return this.setElement($el, false);
      } else {
        if (!this.d3el) {
          this.d3el = d3.select(_.result(this, 'el'));
          this.d3el.attr(attrs);
        }
        return this.setElement(_.result(this, 'el'), false);
      }
    }
  });
});
